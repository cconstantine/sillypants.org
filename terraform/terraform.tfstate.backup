{
    "version": 1,
    "serial": 155,
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_iam_instance_profile.control_instance_profile": {
                    "type": "aws_iam_instance_profile",
                    "depends_on": [
                        "aws_iam_role.s3_access_role"
                    ],
                    "primary": {
                        "id": "control_profile",
                        "attributes": {
                            "arn": "arn:aws:iam::876787418733:instance-profile/control_profile",
                            "id": "control_profile",
                            "name": "control_profile",
                            "path": "/",
                            "roles.#": "1",
                            "roles.2044655173": "s3_access_role"
                        }
                    }
                },
                "aws_iam_instance_profile.s3_profile": {
                    "type": "aws_iam_instance_profile",
                    "depends_on": [
                        "aws_iam_role.s3_access_role"
                    ],
                    "primary": {
                        "id": "s3_profile",
                        "attributes": {
                            "arn": "arn:aws:iam::876787418733:instance-profile/s3_profile",
                            "id": "s3_profile",
                            "name": "s3_profile",
                            "path": "/",
                            "roles.#": "1",
                            "roles.2044655173": "s3_access_role"
                        }
                    }
                },
                "aws_iam_role.s3_access_role": {
                    "type": "aws_iam_role",
                    "primary": {
                        "id": "s3_access_role",
                        "attributes": {
                            "arn": "arn:aws:iam::876787418733:role/s3_access_role",
                            "assume_role_policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
                            "id": "s3_access_role",
                            "name": "s3_access_role",
                            "path": "/",
                            "unique_id": "AROAJOZJPE3BKUJTLAJ7Y"
                        }
                    }
                },
                "aws_iam_role_policy.s3_policy": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.s3_access_role"
                    ],
                    "primary": {
                        "id": "s3_access_role:s3_policy",
                        "attributes": {
                            "id": "s3_access_role:s3_policy",
                            "name": "s3_policy",
                            "policy": "{\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:*\",\n\t\t\t\t\t\t\"Resource\": \"*\"\n        }\n    ]\n}\n",
                            "role": "s3_access_role"
                        }
                    }
                },
                "aws_key_pair.thunk-cconstantine": {
                    "type": "aws_key_pair",
                    "primary": {
                        "id": "thunk-cconstantine",
                        "attributes": {
                            "fingerprint": "4f:73:96:90:25:34:84:cd:34:28:c1:e6:2b:26:31:47",
                            "id": "thunk-cconstantine",
                            "key_name": "thunk-cconstantine",
                            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYAV4ex4s5vQpJTVJfvy9J8kVdV0iJ/cRBQvoUMguJjkja9oiaEJqMOM9mQA8onM51IOoKdbicaRSpvp0GPkUo/0doGmRqMJBeT/jXfhrY3oHjhVkbjzdmf3MVKBSfyz8P4r7lWk6ydNDOJpCS/C4iVbb4zkttY/4lijfGDhTasVt9Qk/I2jdc3GFrD14Q8ahv8+M/QeUrYpIEfUlAP48+/i33aEZU3YGJ9ya7SFGSkmHANSKt498go3FBaou/nXNo1NZpGrM35uRlk0qdX03CF9kl2KHKtz/5H0xKtzNczCjFlEul5tu7NmXVjzAyxr0ceCJ3FcUqSba+5lkC1ui3 cconstantine@thunk"
                        },
                        "meta": {
                            "schema_version": "1"
                        }
                    }
                },
                "aws_route53_record.sillypants_org": {
                    "type": "aws_route53_record",
                    "depends_on": [
                        "module.control"
                    ],
                    "primary": {
                        "id": "ZU7CFKBZNQZFU_sillypants.org_A",
                        "attributes": {
                            "fqdn": "sillypants.org",
                            "id": "ZU7CFKBZNQZFU_sillypants.org_A",
                            "name": "sillypants.org",
                            "records.#": "3",
                            "records.2914364800": "52.25.19.44",
                            "records.3004902477": "52.34.5.171",
                            "records.3423078556": "52.34.18.183",
                            "ttl": "1",
                            "type": "A",
                            "zone_id": "ZU7CFKBZNQZFU"
                        }
                    }
                },
                "aws_route53_record.wildcard_sillypants_org": {
                    "type": "aws_route53_record",
                    "primary": {
                        "id": "ZU7CFKBZNQZFU_*.sillypants.org_CNAME",
                        "attributes": {
                            "fqdn": "*.sillypants.org",
                            "id": "ZU7CFKBZNQZFU_*.sillypants.org_CNAME",
                            "name": "*.sillypants.org",
                            "records.#": "1",
                            "records.1728745172": "sillypants.org",
                            "ttl": "1",
                            "type": "CNAME",
                            "zone_id": "ZU7CFKBZNQZFU"
                        }
                    }
                },
                "aws_s3_bucket.docker_registry": {
                    "type": "aws_s3_bucket",
                    "primary": {
                        "id": "registry.docker.sillypants.org",
                        "attributes": {
                            "acl": "private",
                            "arn": "arn:aws:s3:::registry.docker.sillypants.org",
                            "bucket": "registry.docker.sillypants.org",
                            "cors_rule.#": "0",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3BJ6K6RIION7M",
                            "id": "registry.docker.sillypants.org",
                            "policy": "",
                            "region": "us-west-2",
                            "tags.#": "1",
                            "tags.Name": "Docker Registry",
                            "website.#": "0"
                        }
                    }
                },
                "aws_s3_bucket.vault_storage": {
                    "type": "aws_s3_bucket",
                    "primary": {
                        "id": "vault.sillypants.org",
                        "attributes": {
                            "acl": "private",
                            "arn": "arn:aws:s3:::vault.sillypants.org",
                            "bucket": "vault.sillypants.org",
                            "cors_rule.#": "0",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3BJ6K6RIION7M",
                            "id": "vault.sillypants.org",
                            "policy": "",
                            "region": "us-west-2",
                            "tags.#": "1",
                            "tags.Name": "vault storage",
                            "website.#": "0"
                        }
                    }
                },
                "aws_security_group.allow_all_ssh": {
                    "type": "aws_security_group",
                    "primary": {
                        "id": "sg-1ea4a07a",
                        "attributes": {
                            "description": "Allow all inbound ssh traffic",
                            "egress.#": "0",
                            "id": "sg-1ea4a07a",
                            "ingress.#": "1",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "name": "allow_all_ssh",
                            "owner_id": "876787418733",
                            "tags.#": "0",
                            "vpc_id": "vpc-4a92a62f"
                        }
                    }
                },
                "aws_security_group.allow_all_web": {
                    "type": "aws_security_group",
                    "primary": {
                        "id": "sg-1da4a079",
                        "attributes": {
                            "description": "Allow all inbound web traffic",
                            "egress.#": "0",
                            "id": "sg-1da4a079",
                            "ingress.#": "2",
                            "ingress.2214680975.cidr_blocks.#": "1",
                            "ingress.2214680975.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2214680975.from_port": "80",
                            "ingress.2214680975.protocol": "tcp",
                            "ingress.2214680975.security_groups.#": "0",
                            "ingress.2214680975.self": "false",
                            "ingress.2214680975.to_port": "80",
                            "ingress.2617001939.cidr_blocks.#": "1",
                            "ingress.2617001939.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2617001939.from_port": "443",
                            "ingress.2617001939.protocol": "tcp",
                            "ingress.2617001939.security_groups.#": "0",
                            "ingress.2617001939.self": "false",
                            "ingress.2617001939.to_port": "443",
                            "name": "allow_all_web",
                            "owner_id": "876787418733",
                            "tags.#": "0",
                            "vpc_id": "vpc-4a92a62f"
                        }
                    }
                }
            }
        },
        {
            "path": [
                "root",
                "control"
            ],
            "outputs": {
                "instance_cnames": "n0.control.sillycluster.net,n1.control.sillycluster.net,n2.control.sillycluster.net",
                "instance_private_ips": "172.31.19.13,172.31.33.114,172.31.8.129",
                "instance_public_ips": "52.34.5.171,52.34.18.183,52.25.19.44"
            },
            "resources": {
                "aws_instance.instance.0": {
                    "type": "aws_instance",
                    "primary": {
                        "id": "i-7c6160b8",
                        "attributes": {
                            "ami": "ami-c87769a9",
                            "availability_zone": "us-west-2a",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "control_profile",
                            "id": "i-7c6160b8",
                            "instance_type": "t2.micro",
                            "key_name": "thunk-cconstantine",
                            "monitoring": "false",
                            "private_dns": "ip-172-31-19-13.us-west-2.compute.internal",
                            "private_ip": "172.31.19.13",
                            "public_dns": "ec2-52-34-5-171.us-west-2.compute.amazonaws.com",
                            "public_ip": "52.34.5.171",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-2ea1984b",
                            "tags.#": "1",
                            "tags.Name": "control-0",
                            "tenancy": "default",
                            "vpc_security_group_ids.#": "3",
                            "vpc_security_group_ids.1180797431": "sg-1ea4a07a",
                            "vpc_security_group_ids.1687474415": "sg-4ad7fc2e",
                            "vpc_security_group_ids.2242272133": "sg-1da4a079"
                        },
                        "meta": {
                            "schema_version": "1"
                        }
                    }
                },
                "aws_instance.instance.1": {
                    "type": "aws_instance",
                    "primary": {
                        "id": "i-c0c78919",
                        "attributes": {
                            "ami": "ami-c87769a9",
                            "availability_zone": "us-west-2b",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "control_profile",
                            "id": "i-c0c78919",
                            "instance_type": "t2.micro",
                            "key_name": "thunk-cconstantine",
                            "monitoring": "false",
                            "private_dns": "ip-172-31-33-114.us-west-2.compute.internal",
                            "private_ip": "172.31.33.114",
                            "public_dns": "ec2-52-34-18-183.us-west-2.compute.amazonaws.com",
                            "public_ip": "52.34.18.183",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-26b2ed51",
                            "tags.#": "1",
                            "tags.Name": "control-1",
                            "tenancy": "default",
                            "vpc_security_group_ids.#": "3",
                            "vpc_security_group_ids.1180797431": "sg-1ea4a07a",
                            "vpc_security_group_ids.1687474415": "sg-4ad7fc2e",
                            "vpc_security_group_ids.2242272133": "sg-1da4a079"
                        },
                        "meta": {
                            "schema_version": "1"
                        }
                    }
                },
                "aws_instance.instance.2": {
                    "type": "aws_instance",
                    "primary": null,
                    "tainted": [
                        {
                            "id": "i-74a405ae",
                            "attributes": {
                                "ami": "ami-c87769a9",
                                "availability_zone": "us-west-2c",
                                "ebs_block_device.#": "0",
                                "ebs_optimized": "false",
                                "ephemeral_block_device.#": "0",
                                "iam_instance_profile": "control_profile",
                                "id": "i-74a405ae",
                                "instance_type": "t2.micro",
                                "key_name": "thunk-cconstantine",
                                "monitoring": "false",
                                "private_dns": "ip-172-31-8-129.us-west-2.compute.internal",
                                "private_ip": "172.31.8.129",
                                "public_dns": "ec2-52-25-19-44.us-west-2.compute.amazonaws.com",
                                "public_ip": "52.25.19.44",
                                "root_block_device.#": "1",
                                "root_block_device.0.delete_on_termination": "true",
                                "root_block_device.0.iops": "0",
                                "root_block_device.0.volume_size": "8",
                                "root_block_device.0.volume_type": "standard",
                                "security_groups.#": "0",
                                "source_dest_check": "true",
                                "subnet_id": "subnet-50c7b009",
                                "tags.#": "1",
                                "tags.Name": "control-2",
                                "tenancy": "default",
                                "vpc_security_group_ids.#": "3",
                                "vpc_security_group_ids.1180797431": "sg-1ea4a07a",
                                "vpc_security_group_ids.1687474415": "sg-4ad7fc2e",
                                "vpc_security_group_ids.2242272133": "sg-1da4a079"
                            },
                            "meta": {
                                "schema_version": "1"
                            }
                        }
                    ]
                },
                "aws_route53_record.instance_CNAME.0": {
                    "type": "aws_route53_record",
                    "depends_on": [
                        "aws_instance.instance",
                        "aws_route53_zone.instance_zone"
                    ],
                    "primary": {
                        "id": "Z12V6JIR7LXX1E_n0_CNAME",
                        "attributes": {
                            "fqdn": "n0.control.sillycluster.net",
                            "id": "Z12V6JIR7LXX1E_n0_CNAME",
                            "name": "n0",
                            "records.#": "1",
                            "records.3861091784": "ec2-52-34-5-171.us-west-2.compute.amazonaws.com",
                            "ttl": "1",
                            "type": "CNAME",
                            "zone_id": "Z12V6JIR7LXX1E"
                        }
                    }
                },
                "aws_route53_record.instance_CNAME.1": {
                    "type": "aws_route53_record",
                    "depends_on": [
                        "aws_instance.instance",
                        "aws_route53_zone.instance_zone"
                    ],
                    "primary": {
                        "id": "Z12V6JIR7LXX1E_n1_CNAME",
                        "attributes": {
                            "fqdn": "n1.control.sillycluster.net",
                            "id": "Z12V6JIR7LXX1E_n1_CNAME",
                            "name": "n1",
                            "records.#": "1",
                            "records.1817670695": "ec2-52-34-18-183.us-west-2.compute.amazonaws.com",
                            "ttl": "1",
                            "type": "CNAME",
                            "zone_id": "Z12V6JIR7LXX1E"
                        }
                    }
                },
                "aws_route53_record.instance_CNAME.2": {
                    "type": "aws_route53_record",
                    "depends_on": [
                        "aws_instance.instance",
                        "aws_route53_zone.instance_zone"
                    ],
                    "primary": {
                        "id": "Z12V6JIR7LXX1E_n2_CNAME",
                        "attributes": {
                            "fqdn": "n2.control.sillycluster.net",
                            "id": "Z12V6JIR7LXX1E_n2_CNAME",
                            "name": "n2",
                            "records.#": "1",
                            "records.1027077851": "ec2-52-25-19-44.us-west-2.compute.amazonaws.com",
                            "ttl": "1",
                            "type": "CNAME",
                            "zone_id": "Z12V6JIR7LXX1E"
                        }
                    }
                },
                "aws_route53_record.instance_ns": {
                    "type": "aws_route53_record",
                    "depends_on": [
                        "aws_route53_zone.instance_zone",
                        "aws_route53_zone.instance_zone",
                        "aws_route53_zone.instance_zone",
                        "aws_route53_zone.instance_zone"
                    ],
                    "primary": {
                        "id": "ZPYZBFHONNSZM_control.sillycluster.net_NS",
                        "attributes": {
                            "fqdn": "control.sillycluster.net",
                            "id": "ZPYZBFHONNSZM_control.sillycluster.net_NS",
                            "name": "control.sillycluster.net",
                            "records.#": "4",
                            "records.2030653073": "ns-1883.awsdns-43.co.uk",
                            "records.549095158": "ns-577.awsdns-08.net",
                            "records.635803384": "ns-1269.awsdns-30.org",
                            "records.821394992": "ns-458.awsdns-57.com",
                            "ttl": "30",
                            "type": "NS",
                            "zone_id": "ZPYZBFHONNSZM"
                        }
                    }
                },
                "aws_route53_zone.instance_zone": {
                    "type": "aws_route53_zone",
                    "primary": {
                        "id": "Z12V6JIR7LXX1E",
                        "attributes": {
                            "comment": "Managed by Terraform",
                            "id": "Z12V6JIR7LXX1E",
                            "name": "control.sillycluster.net",
                            "name_servers.#": "4",
                            "name_servers.0": "ns-1269.awsdns-30.org",
                            "name_servers.1": "ns-1883.awsdns-43.co.uk",
                            "name_servers.2": "ns-458.awsdns-57.com",
                            "name_servers.3": "ns-577.awsdns-08.net",
                            "tags.#": "0",
                            "zone_id": "Z12V6JIR7LXX1E"
                        }
                    }
                }
            }
        }
    ]
}
